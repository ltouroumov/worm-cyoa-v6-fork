import{u as D,_ as E,b as N,c as T,a as F,P as L,d as U,e as Y,g as Z,i as G,j as H}from"./C27KumSe.js";import{d as I,z as u,A as d,B as i,D as h,C as S,Z as C,S as l,l as y,_ as R,a3 as q,Y as _,a2 as J,ad as K,$ as Q,c as W,a0 as $,a1 as P}from"./DnoyKoxn.js";import X from"./Bw5FfRFJ.js";import ee from"./Ci53oWlu.js";import{A as z,s as k,M as te,t as v,u as g,z as A,p as B}from"./CBIecBA0.js";import"./DIQE2E1e.js";import"./VZ_ZLigs.js";import"./B5C-AtoX.js";import"./_HAkkcDx.js";import"./BZjCtFDx.js";import"./DPKd5-cv.js";import"./a7gYkR0q.js";import"./CbA-0jCt.js";import"./jc0MLXVe.js";import"./ZhWAdK_X.js";import"./CMB4ACPS.js";import"./Dx-RGxfB.js";import"./mQ8dEqD_.js";import"./DwOy7wgf.js";import"./CVJ5owQz.js";import"./DkV5fO5I.js";import"./n-na11JZ.js";import"./j7Jj-IfZ.js";import"./BrKRGrco.js";import"./CKcDZQNL.js";import"./C0sgzHhA.js";import"./DOq2-aq-.js";import"./BROzlb8Y.js";import"./C5KExJFp.js";import"./PcezX1lz.js";import"./CLs7nh7g.js";import"./BcePxw2k.js";import"./BplniLiz.js";import"./CjeBhF4K.js";import"./cRhpzOtC.js";import"./BcQ4wO1c.js";import"./BZnXWeKs.js";import"./DkC9Z-gi.js";import"./CqOLe7fj.js";import"./CBPvP6Qr.js";import"./alXDb3Da.js";import"./DllrivZD.js";import"./sH9PslEj.js";import"./BLdfxki1.js";import"./DuqEt4VP.js";import"./C00Fxu5e.js";import"./FfmMUk3h.js";import"./D99mKXLL.js";import"./B9Guvwyj.js";import"./RRjIxZ14.js";import"./Cx2-T2S-.js";import"./W90eb4aB.js";import"./Cy-irp6H.js";import"./DDEVnlz5.js";import"./BY6gXI6W.js";import"./C3OL8Ul6.js";import"./C6E1RYka.js";import"./DS22G6f9.js";import"./DJqPDDKy.js";import"./88ZMHBEO.js";import"./DVtXXJxG.js";import"./DKpEVeCR.js";import"./BuYsTyaw.js";import"./2y6vHa8v.js";import"./WJbltgtF.js";import"./Bu5PT99b.js";import"./C0ekI1v1.js";import"./ikndqcPf.js";import"./hM5KQv7r.js";import"./CT9BO7gz.js";import"./DgnrKoaf.js";import"./BYQGhl_m.js";import"./CDOtDdd8.js";import"./Csy14orB.js";import"./CnirFQIQ.js";import"./T54b1cOt.js";import"./Cc8pFDKx.js";const oe={class:"grow flex flex-col gap-0"},se={class:"flex flex-row justify-between items-center"},re={class:"obj-title text-lg"},ie=I({__name:"ParentAddon",props:{obj:{},addon:{}},setup(e){const c=e,{selectedIds:f}=D(),w=y(()=>N(c.addon)),a=y(()=>w.value(f.value));return(b,x)=>{const o=E;return d(),u("div",{class:C(["project-obj obj-horizontal flex flex-row gap-2 px-2 py-1 rounded-md",{selected:l(a),disabled:!l(a)}])},[i("div",oe,[i("div",se,[i("div",re,S(e.addon.title),1)]),h(o,{requireds:e.addon.requireds,"show-always":!0,class:"left text-surface-500 text-sm"},null,8,["requireds"])])],2)}}}),ne=Object.assign(R(ie,[["__scopeId","data-v-31756a98"]]),{__name:"ParentAddon"}),de={class:"grow flex flex-col gap-0"},le={class:"flex flex-row justify-between items-center"},ae={class:"obj-title text-lg"},ce=I({__name:"ParentObj",props:{obj:{}},setup(e){const c=e,{isEnabled:f,isSelected:w,canToggle:a,toggle:b}=T({obj:y(()=>c.obj)}),x=F(),o=()=>{x.showObjectDetails={id:c.obj.id,tab:"details"}};return(s,r)=>{const t=E;return d(),u("div",{class:C(["project-obj obj-horizontal flex flex-row gap-2 px-2 py-1 rounded-md",{selected:l(w),disabled:!l(f),canToggle:l(a)}]),onClick:r[1]||(r[1]=(...n)=>l(b)&&l(b)(...n))},[i("div",de,[i("div",le,[i("div",ae,S(e.obj.title),1),i("div",{class:"size-8 flex flex-col justify-center items-center cursor-pointer",onClick:r[0]||(r[0]=J(n=>o(),["stop","prevent"]))},[...r[2]||(r[2]=[i("div",{class:"size-4 iconify carbon--zoom-in text-surface-300"},null,-1)])])]),e.obj.isSelectableMultiple?(d(),q(L,{key:0,obj:e.obj,"can-toggle":l(a)},null,8,["obj","can-toggle"])):_("",!0),h(t,{requireds:e.obj.requireds,class:"left text-surface-500 text-sm"},null,8,["requireds"])])],2)}}}),pe=Object.assign(R(ce,[["__scopeId","data-v-89ed8401"]]),{__name:"ParentObj"}),me={class:"project-obj obj-parents w-full lg:w-[60rem] h-full overflow-auto flex flex-col pt-4 relative"},ue={class:"w-full flex flex-row items-center justify-between border-b border-surface-500 gap-2 px-4 mb-4 pb-4"},fe={class:"text-xl text-primary"},be={class:"flex flex-row items-center gap-2 mr-10"},je={class:"flex flex-row items-center"},we={class:"w-full px-4 pb-4 flex flex-col gap-4 overflow-auto"},xe={key:0,class:"w-full flex flex-col gap-2"},_e={key:1,class:"w-full row g-2"},he={key:0,class:"col-4"},ve={class:"project-obj obj-default"},ge=I({__name:"ViewParents",props:{row:{},obj:{},addon:{}},setup(e){const c=U(),f=e,w=()=>{const o=G(z(s=>k(r=>[r.obj.id,1],s.entries),b.value));c.setSelected(o,!0)},a=W(!1),b=y(()=>{const o=[],s=[{depth:0,data:f.obj}],r=new Set;for(f.addon&&x(f.addon.data,!0).forEach(n=>{const j=c.getObject(n);j&&s.push({depth:1,data:j})});s.length>0;){const{depth:t,data:n}=s.pop();for(;o.length<=t;)o.push({depth:o.length,entries:[]});const j=c.getObjectRow(n.id),O=c.getRow(j);o[t].entries.push({obj:n,row:O});const p=x(n);for(const V of p){const m=c.getObject(V);m&&!r.has(m.id)&&(r.add(m.id),s.push({depth:t+1,data:m}))}}return o});function x(o,s=!1){function r(t){return!t.showRequired&&!s?[]:te(t).with({type:"id",required:!0},()=>v(g,[t.reqId,t.reqId1,t.reqId2,t.reqId3])).with({type:"id",required:!1},()=>v(g,[t.reqId,t.reqId1,t.reqId2,t.reqId3])).with({type:"or",required:!0,orRequired:A.select()},n=>v(g,k(B("req"),n))).with({type:"or",required:!1,orRequired:A.select()},n=>v(g,k(B("req"),n))).otherwise(()=>[])}return z(r,o.requireds)}return(o,s)=>{const r=ee,t=X,n=ne,j=H,O=Z;return d(),u("div",me,[i("div",ue,[i("div",fe,"Parents of "+S(e.obj.title),1),i("div",be,[h(r,{size:"small",variant:"outlined",label:"Select All",onClick:s[0]||(s[0]=p=>w())}),i("div",je,[h(t,{modelValue:l(a),"onUpdate:modelValue":s[1]||(s[1]=p=>Q(a)?a.value=p:null),class:"mr-2"},null,8,["modelValue"]),s[2]||(s[2]=i("label",{class:"text-surface-500"},"Expand Objects",-1))])])]),i("div",we,[(d(!0),u($,null,P(l(b),(p,V)=>(d(),u("div",{key:p.depth,class:C({"border-t border-surface-500 pt-4":V>0})},[l(a)?_("",!0):(d(),u("div",xe,[(d(!0),u($,null,P(p.entries,({obj:m})=>(d(),q(pe,{key:m.id,obj:m},null,8,["obj"]))),128)),p.depth===0&&e.addon?(d(),q(n,{key:0,obj:e.obj,addon:e.addon.data},null,8,["obj","addon"])):_("",!0)])),l(a)?(d(),u("div",_e,[(d(!0),u($,null,P(p.entries,({obj:m,row:M})=>(d(),q(j,{key:m.id,obj:m,row:M,"view-object":("ViewContext"in o?o.ViewContext:l(Y)).Viewer,template:"1","force-width":"col-4","allow-overflow":!1,"show-addons":!1,display:{showObjectControls:"never"}},null,8,["obj","row","view-object"]))),128)),p.depth===0&&e.addon?(d(),u("div",he,[i("div",ve,[h(O,{"obj-id":e.obj.id,index:e.addon.index,addon:e.addon.data},null,8,["obj-id","index","addon"])])])):_("",!0)])):_("",!0)],2))),128))]),K(o.$slots,"right",{},void 0,!0)])}}}),Zt=Object.assign(R(ge,[["__scopeId","data-v-2ec6d5b7"]]),{__name:"ViewParents"});export{Zt as default};
