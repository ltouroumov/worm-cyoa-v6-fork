import M from"./Gi5yRDF2.js";import W from"./D6fORD9n.js";import T from"./BT6u0EtW.js";import J from"./UsgRk3q1.js";import B from"./DlRiyM0n.js";import{G as A,a as K,_ as Q}from"./CY6mGi24.js";import{a as y,O as V,o as ee}from"./DWev5g_1.js";import{i as F,g as oe,L as te,Y as ne,u as le,x as ie,B as re}from"./C9gzREN6.js";import{f as se}from"./fF5XuFuk.js";import{d as b,k as g,r as S,y as h,z as f,C as o,S as l,D as m,A as n,Z as O,E as G,B as P,a2 as R,X as L,$ as H,a0 as ae,Y as de}from"./CatXm4QS.js";import z from"./D-9SPapt.js";import{C as ce}from"./rdhljovi.js";import{I as D}from"./ASJbl1mh.js";import E from"./BavqVG2J.js";import Y from"./Bd6sHIKT.js";import X from"./BtHYtFKc.js";import ue from"./DKAqdNh-.js";import{u as Z}from"./CugLXepz.js";import{u as me}from"./CZxNGNPA.js";import pe from"./PL1m4o8q.js";import q from"./5a79p2cJ.js";import fe from"./BSExNcYE.js";import _e from"./BSpSscaj.js";import ve from"./CiWKo-6F.js";import{t as N}from"./D6nGmAbb.js";import"./CLs7nh7g.js";import"./Bx90go0B.js";import"./tCFoyw9n.js";import"./Dgx0yGI0.js";import"./jc0MLXVe.js";import"./EUShYJ0M.js";import"./BzLPc_86.js";import"./DQl_d7jh.js";import"./Cu8HBrMI.js";import"./BkAAsbGn.js";import"./D3dOpJCP.js";import"./D8kI8Nps.js";import"./D_BN1lgm.js";import"./47bJm8wX.js";import"./BjzI29Sb.js";import"./CGT6q8W4.js";import"./DLjKffCo.js";import"./B8EMXSOR.js";import"./CAoeRcwO.js";import"./DYgV5TvN.js";import"./CdxZ5cof.js";import"./ZhWAdK_X.js";import"./t-ou-FGY.js";import"./v5QlgRen.js";import"./DMXlXtiW.js";import"./DwOy7wgf.js";import"./C72d3mkp.js";import"./D4jh_xiy.js";import"./8XUcu141.js";import"./DKwNSgoE.js";import"./CkeYLcDU.js";import"./Cdj3g345.js";import"./B6eiiA-k.js";import"./DnBAieYi.js";import"./Da-54s6M.js";import"./DTBi7V0r.js";const xe={class:"flex flex-col gap-2 items-stretch"},we={class:"flex flex-row gap-2 justify-stretch"},he=b({__name:"ChoiceLayout",props:{choiceId:{},index:{}},setup(s){const a=y(),d=s,t=g(()=>{const v=a.getParent(d.choiceId);return a.getChildren(v)[d.index]}),c=g(()=>{const v=t.value.layout?.width;return F(v)?"auto":se(w=>w.value===v,A).label}),e=g(()=>{const v=a.getParent(d.choiceId);return a.get(v,V.row).layout.itemWidth}),p=S(),i=S("auto"),r=S(0);function _(v){const w=t.value.layout?.width;i.value=F(w)?"auto":"override",r.value=w??e.value,p.value.toggle(v)}function x(){i.value==="auto"?t.value.layout=ee(["width"],t.value.layout??{}):t.value.layout=oe("width",r.value,t.value.layout??{}),p.value.hide()}const u=[{label:"Auto",value:"auto"},{label:"Override",value:"override"}];return(v,w)=>{const C=B,I=J,j=T,k=W,U=M;return f(),h("div",null,[o(C,{outlined:"",severity:"secondary",label:l(c),"pt:root:class":"leading-none py-0 h-[2.0rem]","pt:icon:class":"leading-none text-[1.5rem] h-[1.5rem]",onClick:_},null,8,["label"]),o(U,{ref_key:"choiceLayoutPopover",ref:p,"pt:content:class":"min-w-[20rem]"},{default:m(()=>[n("div",xe,[n("div",we,[o(I,{modelValue:l(i),"onUpdate:modelValue":w[0]||(w[0]=$=>O(i)?i.value=$:null),options:u,"option-label":"label","option-value":"value",fluid:""},null,8,["modelValue"]),o(C,{label:"Save",fluid:"",onClick:x})]),o(k,null,{default:m(()=>[o(j,{modelValue:l(r),"onUpdate:modelValue":w[1]||(w[1]=$=>O(r)?r.value=$:null),options:l(A),"option-label":"label","option-value":"value",disabled:l(i)!=="override",class:"grow",fluid:""},null,8,["modelValue","options","disabled"]),w[2]||(w[2]=n("label",null,"Item Width",-1))]),_:1})])]),_:1},512)])}}}),ge=Object.assign(he,{__name:"ChoiceLayout"}),ye={class:"flex flex-row gap-2"},be={class:"flex flex-col gap-2"},Ie=b({__name:"ChoiceMove",props:{choiceId:{},index:{}},setup(s){Z(),y();const{moveRelative:a,moveAbsolute:d}=me(),t=s,c=S(),e=S(0);function p(x){e.value=t.index,c.value.toggle(x)}function i(){a(t.choiceId,-1)}function r(){a(t.choiceId,1)}function _(){d(t.choiceId,e.value),c.value.hide()}return(x,u)=>{const v=D,w=B,C=ue,I=X,j=Y,k=E,U=M;return f(),h("div",ye,[o(C,null,{default:m(()=>[o(v,{outlined:"",severity:"secondary",icon:"iconify solar--arrow-left-line-duotone",onClick:u[0]||(u[0]=$=>i())}),o(w,{outlined:"",severity:"secondary",label:l(te)(s.index),"pt:root:class":"leading-none p-0 w-[2.5rem] h-[2.0rem]","pt:icon:class":"leading-none text-[1.5rem] w-[1.5rem] h-[1.5rem]",onClick:p},null,8,["label"]),o(v,{outlined:"",severity:"secondary",icon:"iconify solar--arrow-right-line-duotone",onClick:u[1]||(u[1]=$=>r())})]),_:1}),o(U,{ref_key:"indexShiftPopover",ref:c},{default:m(()=>[n("div",be,[u[4]||(u[4]=n("span",{class:"text-surface-500 text-sm"},"Move to position",-1)),o(k,null,{default:m(()=>[o(I,{modelValue:l(e),"onUpdate:modelValue":u[2]||(u[2]=$=>O(e)?e.value=$:null),"show-buttons":""},null,8,["modelValue"]),o(j,null,{default:m(()=>[o(w,{severity:"secondary",icon:"iconify solar--round-double-alt-arrow-right-line-duotone",onClick:u[3]||(u[3]=$=>_())})]),_:1})]),_:1})])]),_:1},512)])}}}),$e=Object.assign(Ie,{__name:"ChoiceMove"}),Ve={class:"flex flex-col gap-2 rounded border border-surface-700 p-2"},Ce={class:"flex flex-row justify-between items-center"},je={class:"flex flex-row gap-2"},ke={class:"text-primary text-xl font-bold grow group-hover:underline"},Se={class:"text-surface-500 text-sm"},Re={class:"flex flex-row gap-2"},Le={class:"flex flex-col gap-2"},We={class:"font-bold"},Be={class:"max-h-[10rem] overflow-hidden text-ellipsis"},Pe=b({__name:"ChoiceCard",props:{choiceId:{},index:{}},setup(s){const a=Z(),d=y(),t=s,c=g(()=>d.get(t.choiceId,V.choice));function e(){a.pushScreen({type:"edit-choice",choiceId:c.value.id})}return(p,i)=>{const r=ge,_=B,x=z;return f(),h("div",Ve,[n("div",Ce,[o($e,{"choice-id":s.choiceId,index:s.index},null,8,["choice-id","index"]),o(r,{"choice-id":s.choiceId,index:s.index},null,8,["choice-id","index"]),n("div",je,[o(_,{variant:"outlined",size:"small",severity:"secondary"},{default:m(()=>[...i[1]||(i[1]=[G(" Clone ",-1)])]),_:1}),o(_,{variant:"outlined",size:"small",severity:"danger"},{default:m(()=>[...i[2]||(i[2]=[G(" Delete ",-1)])]),_:1})])]),n("div",{class:"flex flex-row items-center cursor-pointer group",onClick:i[0]||(i[0]=u=>e())},[n("div",ke,P(l(c).name),1),n("div",Se,P(l(c).id),1)]),n("div",Re,[n("div",null,[l(F)(l(c).header?.image)?(f(),R(x,{key:0,width:"5rem",height:"3rem",animation:"none"})):L("",!0),l(c).header?.image?(f(),R(ce,{key:1,"media-id":l(c).header.image,width:"5rem"},null,8,["media-id"])):L("",!0)]),n("div",Le,[n("div",We,P(l(c).header?.title),1),n("div",Be,P(l(c).header?.text),1)])])])}}}),Fe=Object.assign(Pe,{__name:"ChoiceCard"}),Oe={class:"flex flex-row justify-center items-center bg-surface-700"},Ue=b({__name:"RowImage",props:{mediaId:{}},setup(s){const a=y(),d=s,t=g(()=>a.media.images[d.mediaId]);return(c,e)=>{const p=_e;return f(),h("div",Oe,[o(p,{src:l(t).data,"pt:image:class":"object-contain object-center"},null,8,["src"])])}}}),Ae=Object.assign(Ue,{__name:"RowImage"}),De={key:0,class:"grid grid-cols-3 gap-2"},qe={class:"flex flex-col gap-2 items-stretch justify-center grow"},Ge={class:"flex flex-row justify-stretch grow relative group rounded overflow-auto"},He={class:"absolute bg-slate-500/50 top-0 left-0 right-0 bottom-0 opacity-0 group-hover:opacity-100 duration-300 flex flex-row items-center justify-center cursor-pointer"},Ne={class:"flex flex-col gap-2 col-span-2"},Me={key:1,class:"flex flex-row justify-center items-center min-h-[10rem]"},Te=b({__name:"RowHeaderForm",props:{rowId:{}},setup(s){const a=y(),d=s,t=g(()=>a.get(d.rowId,V.row));return(c,e)=>{const p=z,i=D,r=q,_=W,x=fe,u=B;return l(t).header?(f(),h("div",De,[n("div",qe,[n("div",Ge,[l(F)(l(t).header?.image)?(f(),R(p,{key:0,animation:"none",class:"grow",height:"auto"})):L("",!0),l(t).header.image?(f(),R(Ae,{key:1,"media-id":l(t).header.image,class:"grow border border-surface-700"},null,8,["media-id"])):L("",!0),n("div",He,[e[2]||(e[2]=n("i",{class:"iconify solar--pen-line-duotone"},null,-1)),l(t).header.image?(f(),R(i,{key:0,outlined:"",severity:"danger",icon:"iconify solar--trash-bin-trash-line-duotone",class:"absolute right-[0.5rem] bottom-[0.5rem]"})):L("",!0)])])]),n("div",Ne,[o(_,null,{default:m(()=>[o(r,{modelValue:l(t).header.title,"onUpdate:modelValue":e[0]||(e[0]=v=>l(t).header.title=v)},null,8,["modelValue"]),e[3]||(e[3]=n("label",null,"Title",-1))]),_:1}),o(x,{modelValue:l(t).header.text,"onUpdate:modelValue":e[1]||(e[1]=v=>l(t).header.text=v),"editor-style":"height: 12rem;"},null,8,["modelValue"])])])):(f(),h("div",Me,[o(u,{variant:"outlined",severity:"secondary",icon:"iconify iconify solar--add-circle-line-duotone",label:"Add Header"})]))}}}),ze=Object.assign(Te,{__name:"RowHeaderForm"}),Ee={key:0,class:"flex flex-col gap-2 grow"},Ye=b({__name:"RowLayoutForm",props:{rowId:{}},setup(s){const a=y(),d=s,t=g(()=>a.get(d.rowId,V.row));return(c,e)=>{const p=T,i=W;return l(t).layout?(f(),h("div",Ee,[o(i,null,{default:m(()=>[o(p,{modelValue:l(t).layout.itemAlign,"onUpdate:modelValue":e[0]||(e[0]=r=>l(t).layout.itemAlign=r),options:l(K),"option-label":"label","option-value":"value"},null,8,["modelValue","options"]),e[2]||(e[2]=n("label",null,"Item Position",-1))]),_:1}),o(i,null,{default:m(()=>[o(p,{modelValue:l(t).layout.itemWidth,"onUpdate:modelValue":e[1]||(e[1]=r=>l(t).layout.itemWidth=r),options:l(A),"option-label":"label","option-value":"value"},null,8,["modelValue","options"]),e[3]||(e[3]=n("label",null,"Item Width",-1))]),_:1})])):L("",!0)}}}),Xe=Object.assign(Ye,{__name:"RowLayoutForm"}),Ze={class:"flex flex-col gap-2 grow"},Je={key:0,class:"p-component p-inputtext flex flex-row gap-1 items-start"},Ke={key:1,class:"p-component p-inputtext flex flex-row gap-1 items-center"},Qe=b({__name:"RowRequirementsForm",props:{rowId:{}},setup(s){const a=y(),d=s,t=g(()=>a.get(d.rowId,V.row));return(c,e)=>{const p=X,i=W,r=Q,_=D;return f(),h("div",Ze,[o(i,null,{default:m(()=>[o(p,{modelValue:l(t).requirements.allowedChoices,"onUpdate:modelValue":e[0]||(e[0]=x=>l(t).requirements.allowedChoices=x)},null,8,["modelValue"]),e[1]||(e[1]=n("label",null,"Allowed Choices",-1))]),_:1}),o(i,null,{default:m(()=>[e[3]||(e[3]=n("label",null,"Display Condition",-1)),l(t).requirements.display?(f(),h("div",Je,[o(r,{term:l(t).requirements.display,class:"grow"},null,8,["term"]),o(_,{severity:"secondary",icon:"iconify solar--pen-line-duotone",class:"shrink-0"})])):(f(),h("div",Ke,[e[2]||(e[2]=n("div",{class:"text-secondary grow"},"Always Visible",-1)),o(_,{severity:"secondary",icon:"iconify solar--add-circle-line-duotone",class:"shrink-0"})]))]),_:1})])}}}),eo=Object.assign(Qe,{__name:"RowRequirementsForm"}),oo={class:"flex flex-col gap-2"},to={class:"flex flex-col gap-2 justify-stretch"},no={class:"flex flex-row gap-2"},lo={class:"flex flex-col"},io={class:"flex flex-row gap-2"},ro={class:"flex flex-col grow"},so={class:"flex flex-col grow"},ao=b({__name:"RowScreenHeader",props:{rowId:{}},setup(s){const a=y(),d=s,t=g(()=>a.get(d.rowId,V.row));return(c,e)=>{const p=q,i=W,r=ze,_=Xe,x=ve;return f(),h("div",oo,[o(x,null,{default:m(()=>[n("div",to,[n("div",no,[o(i,{class:"grow"},{default:m(()=>[o(p,{modelValue:l(t).name,"onUpdate:modelValue":e[0]||(e[0]=u=>l(t).name=u),modelModifiers:{lazy:!0}},null,8,["modelValue"]),e[2]||(e[2]=n("label",null,"Name",-1))]),_:1}),o(i,null,{default:m(()=>[o(p,{modelValue:l(t).id,"onUpdate:modelValue":e[1]||(e[1]=u=>l(t).id=u),disabled:""},null,8,["modelValue"]),e[3]||(e[3]=n("label",null,"ID",-1))]),_:1})]),n("div",lo,[e[4]||(e[4]=n("div",{class:"border-b border-surface-700 pb-1 mb-2"},[n("div",{class:"text-xl font-bold text-primary"},"Header")],-1)),o(r,{"row-id":s.rowId},null,8,["row-id"])]),n("div",io,[n("div",ro,[e[5]||(e[5]=n("div",{class:"border-b border-surface-700 pb-1 mb-2"},[n("div",{class:"text-xl font-bold text-primary"},"Layout")],-1)),o(_,{"row-id":s.rowId},null,8,["row-id"])]),n("div",so,[e[6]||(e[6]=n("div",{class:"border-b border-surface-700 pb-1 mb-2"},[n("div",{class:"text-xl font-bold text-primary"},"Requirements")],-1)),o(eo,{"row-id":s.rowId},null,8,["row-id"])])])])]),_:1})])}}}),co=Object.assign(ao,{__name:"RowScreenHeader"}),uo={class:"flex flex-row justify-between items-center"},mo={class:"grid grid-cols-60 gap-2"},po=b({__name:"RowScreen",props:{rowId:{}},setup(s){const a=y(),d=s,t=g(()=>a.get(d.rowId,V.row)),c=g(()=>{const i=p.value;if(le(i))return a.getChildren(d.rowId);{const r=N(i);return ie(({id:_})=>{const x=a.get(_,V.choice);return re(r,N(x.name))},a.getChildren(d.rowId))}}),e=S(""),p=ne(e,100);return g(()=>60/t.value.layout.itemWidth*4),(i,r)=>{const _=Y,x=q,u=B,v=E,w=Fe,C=pe;return f(),h(H,null,[o(co,{"row-id":s.rowId},null,8,["row-id"]),o(C,{value:l(c),"data-key":"id",dt:{header:{padding:"1rem 0"},content:{padding:"1rem 0"}}},{header:m(()=>[n("div",uo,[r[3]||(r[3]=n("h3",{class:"text-xl font-bold text-primary"},"Choices",-1)),o(v,{class:"w-auto min-w-8"},{default:m(()=>[o(_,null,{default:m(()=>[...r[2]||(r[2]=[n("i",{class:"iconify solar--filter-line-duotone"},null,-1)])]),_:1}),o(x,{modelValue:l(e),"onUpdate:modelValue":r[0]||(r[0]=I=>O(e)?e.value=I:null),size:"small"},null,8,["modelValue"]),o(_,null,{default:m(()=>[o(u,{icon:"iconify solar--close-circle-line-duotone",severity:"secondary",onClick:r[1]||(r[1]=I=>e.value="")})]),_:1})]),_:1})])]),list:m(({items:I})=>[n("div",mo,[(f(!0),h(H,null,ae(I,(j,k)=>(f(),R(w,{key:k,"choice-id":j.id,"parent-id":s.rowId,index:k,class:de(`col-span-${j.layout?.width??l(t).layout?.itemWidth??12}`)},null,8,["choice-id","parent-id","index","class"]))),128))])]),_:1},8,["value"])],64)}}}),yt=Object.assign(po,{__name:"RowScreen"});export{yt as default};
